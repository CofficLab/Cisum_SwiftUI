---
description: Swift æ–‡ä»¶æ—¥å¿—è®°å½•è§„èŒƒï¼ˆå®ç° SuperLog åè®®ï¼Œç»Ÿä¸€æ—¥å¿—æ ¼å¼ï¼‰
globs: *.swift
alwaysApply: false
---
# Swift æ–‡ä»¶æ—¥å¿—è®°å½•è§„èŒƒ

æœ¬è§„åˆ™çº¦æŸ Swift æ–‡ä»¶ä¸­çš„æ—¥å¿—è®°å½•è¡Œä¸ºï¼Œç»Ÿä¸€ä½¿ç”¨ SuperLog åè®®æ¥æä¾›ä¸€è‡´çš„æ—¥å¿—æ ¼å¼å’Œè°ƒè¯•ä½“éªŒã€‚

## æ ¸å¿ƒåŸåˆ™

**æ‰€æœ‰éœ€è¦æ—¥å¿—è®°å½•çš„ Swift ç±»å‹éƒ½åº”è¯¥å®ç° `SuperLog` åè®®ï¼Œå¹¶éµå¾ªç»Ÿä¸€çš„æ—¥å¿—æ ¼å¼è§„èŒƒã€‚**

## åè®®å®ç°è¦æ±‚

### 1. å®ç° SuperLog åè®®

```swift
struct MyView: View, SuperLog {
    // å®ç°å¿…éœ€çš„é™æ€å±æ€§
    nonisolated static let emoji = "ğŸ¯"  // ä½¿ç”¨åˆé€‚çš„ emoji
    nonisolated static let verbose = false  // æ§åˆ¶è¯¦ç»†æ—¥å¿—è¾“å‡º

    // ä½¿ç”¨ self.t è¿›è¡Œæ—¥å¿—è®°å½•
    func someFunction() {
        if Self.verbose {
            os_log("\(self.t)Some operation started")
        }
    }
}
```

### 2. é™æ€å¸¸é‡å®šä¹‰

#### Emoji å®šä¹‰

- **å¿…é¡»å®šä¹‰**: `nonisolated static let emoji = "ğŸ¯"`
- **å”¯ä¸€æ€§**: æ¯ä¸ªç±»å‹ä½¿ç”¨ç‹¬ç‰¹çš„ emojiï¼Œä¾¿äºæ—¥å¿—è¿‡æ»¤
- **ç›¸å…³æ€§**: emoji åº”ä¸ç±»å‹åŠŸèƒ½ç›¸å…³
- **ä½ç½®**: æ”¾åœ¨ç±»å‹å®šä¹‰çš„æœ€ä¸Šæ–¹

#### Verbose æ§åˆ¶

- **å¿…é¡»å®šä¹‰**: `nonisolated static let verbose = false`
- **ç±»å‹**: `Bool` ç±»å‹ï¼Œæ§åˆ¶è¯¦ç»†æ—¥å¿—è¾“å‡º
- **é»˜è®¤å€¼**: é€šå¸¸è®¾ä¸º `false`ï¼Œç”Ÿäº§ç¯å¢ƒå…³é—­è¯¦ç»†æ—¥å¿—
- **ä½ç½®**: ä¸ emoji å®šä¹‰åœ¨ä¸€èµ·

### 3. æ—¥å¿—è®°å½•è§„èŒƒ

#### ä½¿ç”¨ self.t æ ‡ç­¾

```swift
os_log("\(self.t)Operation completed successfully")
```

#### æ—¥å¿—çº§åˆ«æ§åˆ¶

```swift
if Self.verbose {
    os_log("\(self.t)Detailed debug information")
} else {
    os_log("\(self.t)Basic operation info")  // æ€»æ˜¯è¾“å‡ºçš„é‡è¦ä¿¡æ¯
}
```

#### æ—¥å¿—å†…å®¹æ ¼å¼

- **å‰ç¼€**: ä½¿ç”¨ `\(self.t)` ä½œä¸ºå‰ç¼€ï¼Œè‡ªåŠ¨åŒ…å« emoji å’Œç±»å‹å
- **åŠ¨è¯**: ä½¿ç”¨ä¸»åŠ¨è¯­æ€æè¿°æ“ä½œ
- **æ—¶æ€**: ä½¿ç”¨ä¸€èˆ¬ç°åœ¨æ—¶æˆ–è¿‡å»æ—¶
- **ä¸Šä¸‹æ–‡**: åŒ…å«å…³é”®å‚æ•°å’ŒçŠ¶æ€ä¿¡æ¯

## å¸¸è§æ¨¡å¼

### View ç»„ä»¶æ—¥å¿—

```swift
struct UserProfileView: View, SuperLog {
    nonisolated static let emoji = "ğŸ‘¤"
    nonisolated static let verbose = false

    func loadUserData() {
        if Self.verbose {
            os_log("\(self.t)Loading user data...")
        }

        // åŠ è½½é€»è¾‘...

        os_log("\(self.t)User data loaded successfully")
    }
}
```

### æ•°æ®æä¾›è€…æ—¥å¿—

```swift
class DataProvider: SuperLog {
    nonisolated static let emoji = "ğŸ "
    static var verbose = false

    func fetchData() {
        if Self.verbose {
            os_log("\(self.t)Fetching data from server")
        }
    }
}
```

### ä¸šåŠ¡é€»è¾‘ç±»æ—¥å¿—

```swift
class GitManager: SuperLog {
    nonisolated static let emoji = "ğŸ”§"
    static var verbose = false

    func commitChanges(_ message: String) {
        if Self.verbose {
            os_log("\(self.t)Committing changes with message: \(message)")
        }
    }
}
```

## Emoji é€‰æ‹©æŒ‡å—

### UI ç›¸å…³

- `ğŸŒ¿` - View ç»„ä»¶ (BranchStatusTile)
- `ğŸ“±` - ç§»åŠ¨ç«¯ç›¸å…³
- `ğŸ–¥ï¸` - æ¡Œé¢ç«¯ç›¸å…³
- `ğŸ›ï¸` - æ§åˆ¶é¢æ¿
- `ğŸ“‹` - è¡¨å•ç»„ä»¶

### æ•°æ®ç›¸å…³

- `ğŸ ` - æ•°æ®æä¾›è€… (DataProvider)
- `ğŸ’¾` - æ•°æ®å­˜å‚¨
- `ğŸ“Š` - æ•°æ®åˆ†æ
- `ğŸ”„` - æ•°æ®åŒæ­¥

### ä¸šåŠ¡åŠŸèƒ½

- `ğŸ”§` - å·¥å…·ç±»
- `ğŸ“` - æ–‡ä»¶ç®¡ç†
- `ğŸŒ³` - é¡¹ç›®ç®¡ç†
- `ğŸ“` - æ–‡æœ¬ç¼–è¾‘
- `ğŸ”` - æœç´¢åŠŸèƒ½

### ç³»ç»Ÿç›¸å…³

- `ğŸ` - macOS ç›¸å…³ (MacAgent)
- `âš™ï¸` - ç³»ç»Ÿé…ç½®
- `ğŸ”—` - ç½‘ç»œè¿æ¥
- `ğŸ””` - é€šçŸ¥ç³»ç»Ÿ

## æœ€ä½³å®è·µ

### 1. æ—¥å¿—çº§åˆ«ç®¡ç†

```swift
// é”™è¯¯æ—¥å¿— - æ€»æ˜¯è¾“å‡º
os_log(.error, "\(self.t)Failed to load data: \(error.localizedDescription)")

// è­¦å‘Šæ—¥å¿— - é‡è¦ä½†éé”™è¯¯æƒ…å†µ
os_log(.info, "\(self.t)Using fallback data due to network unavailability")

// è°ƒè¯•æ—¥å¿— - ä»…å¼€å‘æ—¶éœ€è¦
if Self.verbose {
    os_log("\(self.t)Processing \(items.count) items")
}
```

### 2. æ€§èƒ½è€ƒè™‘

```swift
// é¿å…åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿›è¡Œæ˜‚è´µçš„å­—ç¬¦ä¸²æ’å€¼
if Self.verbose {
    let debugInfo = expensiveDebugString()
    os_log("\(self.t)Debug info: \(debugInfo)")
}
```

### 3. æ•æ„Ÿä¿¡æ¯ä¿æŠ¤

```swift
// ä¸è¦è®°å½•æ•æ„Ÿä¿¡æ¯
// âŒ é”™è¯¯ï¼šè®°å½•å¯†ç 
os_log("\(self.t)Authenticating user with password: \(password)")

// âœ… æ­£ç¡®ï¼šåªè®°å½•æ“ä½œç»“æœ
os_log("\(self.t)User authentication \(success ? "succeeded" : "failed")")
```

### 4. æ—¥å¿—è¿‡æ»¤

ç”±äºæ¯ä¸ªç±»å‹éƒ½æœ‰ç‹¬ç‰¹çš„ emojiï¼Œå¯ä»¥é€šè¿‡ emoji å¿«é€Ÿè¿‡æ»¤ç›¸å…³æ—¥å¿—ï¼š

```bash
# è¿‡æ»¤ BranchStatusTile çš„æ—¥å¿—
log stream | grep "ğŸŒ¿"

# è¿‡æ»¤ DataProvider çš„æ—¥å¿—
log stream | grep "ğŸ "
```

## è§„åˆ™ä¼˜åŠ¿

### 1. ç»Ÿä¸€çš„æ—¥å¿—æ ¼å¼

- æ‰€æœ‰æ—¥å¿—éƒ½æœ‰ç»Ÿä¸€çš„ `\(self.t)` å‰ç¼€
- emoji æä¾›è§†è§‰è¯†åˆ«
- ç±»å‹åæä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯

### 2. ä¾¿äºè°ƒè¯•

- å¯ä»¥é€šè¿‡ emoji å¿«é€Ÿå®šä½é—®é¢˜ç±»å‹
- verbose æ§åˆ¶æä¾›è°ƒè¯•çº§åˆ«çš„çµæ´»æ€§
- ç»“æ„åŒ–çš„æ—¥å¿—å†…å®¹æ˜“äºè§£æ

### 3. æ€§èƒ½ä¼˜åŒ–

- `nonisolated static` å±æ€§é¿å…å®ä¾‹å¼€é”€
- verbose æ§åˆ¶é¿å…ä¸å¿…è¦çš„å­—ç¬¦ä¸²æ“ä½œ
- ç¼–è¯‘æ—¶å¸¸é‡ä¼˜åŒ–

### 4. ç»´æŠ¤å‹å¥½

- åè®®åŒ–å®ç°ä¿è¯ä¸€è‡´æ€§
- é™æ€é…ç½®ä¾¿äºå…¨å±€æ§åˆ¶
- emoji æ˜ å°„æä¾›åŠŸèƒ½æ¦‚è§ˆ

éµå¾ªæ­¤è§„åˆ™å¯ä»¥æ˜¾è‘—æå‡ä»£ç çš„å¯è°ƒè¯•æ€§ã€å¯ç»´æŠ¤æ€§å’Œå¼€å‘ä½“éªŒï¼Œä¸ºç”Ÿäº§ç¯å¢ƒçš„ç›‘æ§å’Œé—®é¢˜æ’æŸ¥æä¾›æœ‰åŠ›æ”¯æŒã€‚
