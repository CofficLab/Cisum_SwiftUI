import SwiftUI
import Foundation
import OSLog

class AudioApp: SuperLayout, SuperLog {
    var id: String = "Audio"
    
    var iconName: String = "music.note.list"
    
    var icon: any View {
        Image(systemName: iconName)
    }
    
    var layout: any View {
        AudioLayout()
    }
    
    var poster: any View {
        AudioPoster()
    }
    
    var title = "æ­Œæ›²æ¨¡å¼"
    
    var description: String = "ä½œä¸ºæ­Œæ›²ä»“åº“ï¼Œåªå…³æ³¨æ–‡ä»¶ï¼Œæ–‡ä»¶å¤¹å°†è¢«å¿½ç•¥"
    
    func getDisk() -> (any Disk)? {
        DiskiCloud.make("audios")
    }
    
    // MARK: æ¢å¤ä¸Šæ¬¡æ’­æ”¾çš„

    func restore(reason: String, verbose: Bool = true) {
        if verbose {
            os_log("\(self.t)ğŸ‘»ğŸ‘»ğŸ‘» Restore because of \(reason)")
        }

//        playMan.mode = PlayMode(rawValue: Config.currentMode) ?? playMan.mode

//        Task {
//            let currentURL = await dbSynced.getSceneCurrent(data.appScene, reason: "Restore")
//
//            if let url = currentURL {
//                if verbose {
//                    os_log("\(t)ä¸Šæ¬¡æ’­æ”¾ -> \(url.lastPathComponent)")
//                }
//
//                playMan.prepare(PlayAsset(url: url))
//            } else {
//                if verbose {
//                    os_log("\(t)æ— ä¸Šæ¬¡æ’­æ”¾çš„éŸ³é¢‘ï¼Œå°è¯•æ’­æ”¾ç¬¬ä¸€ä¸ª(\(data.disk.name))")
//                }
//
//                playMan.prepare(data.first())
//            }
//        }
    }
}
